<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>Securing Your Sites for HTTPS &#8211; J.D. Flynn and the Adventures in Web Development</title>
<meta name="description" content="The world is a dangerous place.  There is a lot of information out there, and some of it is more sensitive than the rest.  Your name, your emails, your passwords, social security, birth dates, credit card numbers, etc.  Many people just type their info into the forms with no thought">
<meta name="keywords" content="web development, ssl, https">



<!-- Twitter Cards -->
<meta name="twitter:title" content="Securing Your Sites for HTTPS">
<meta name="twitter:description" content="The world is a dangerous place.  There is a lot of information out there, and some of it is more sensitive than the rest.  Your name, your emails, your passwords, social security, birth dates, credit card numbers, etc.  Many people just type their info into the forms with no thought">
<meta name="twitter:site" content="@JDDoesDev">
<meta name="twitter:creator" content="@JDDoesDev">

<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://blog.local/images/default-thumb.png">

<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="Securing Your Sites for HTTPS">
<meta property="og:description" content="The world is a dangerous place.  There is a lot of information out there, and some of it is more sensitive than the rest.  Your name, your emails, your passwords, social security, birth dates, credit card numbers, etc.  Many people just type their info into the forms with no thought">
<meta property="og:url" content="http://blog.local/development/secure-sites-https/">
<meta property="og:site_name" content="J.D. Flynn and the Adventures in Web Development">

<!-- Webmaster Tools verfication -->
<meta name="google-site-verification" content="byemwVOh8JIg3XatAJz2TwH16xSHbOLLKl47oQTTLZE">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-60490227-1', 'auto');
  ga('require', 'linkid', 'linkid.js');
  ga('send', 'pageview');

</script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>



<link rel="canonical" href="http://blog.local/development/secure-sites-https/">
<link href="http://blog.local/feed.xml" type="application/atom+xml" rel="alternate" title="J.D. Flynn and the Adventures in Web Development Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- For all browsers -->
<link rel="stylesheet" href="http://blog.local/assets/css/main.css">

<meta http-equiv="cleartype" content="on">

<!-- HTML5 Shiv and Media Query Support -->
<!--[if lt IE 9]>
	<script src="http://blog.local/assets/js/vendor/html5shiv.min.js"></script>
	<script src="http://blog.local/assets/js/vendor/respond.min.js"></script>
<![endif]-->

<!-- Modernizr -->
<script src="http://blog.local/assets/js/vendor/modernizr-2.7.1.custom.min.js"></script>
<script type="application/ld+json">
{ "@context" : "http://schema.org",
  "@type" : "Person",
  "name" : "J.D. Flynn",
  "jobTitle" : "Web Developer, Blogger, SEO Enthusiast",
  "url" : "https://www.jamesdflynn.com",
  "sameAs" : [ "http://www.linkedin.com/in/jflynn8",
      "http://www.twitter.com/JDDoesDev",
      "http://www.github.com/jflynnSMG"],
  "description" : "J.D. Flynn is a web developer with a newfound passion for SEO and learning every aspect of it that he can.  He can be found on Twitter, LinkedIn, Github, or on his blog jamesdflynn.com"
}
</script>

<link href='//fonts.googleapis.com/css?family=PT+Sans+Narrow:400,700%7CPT+Serif:400,700,400italic' rel='stylesheet' type='text/css'>

<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="http://blog.local/favicon.ico">
<!-- 32x32 -->
<link rel="shortcut icon" href="http://blog.local/favicon.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="http://blog.local/images/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="http://blog.local/images/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="http://blog.local/images/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://blog.local/images/apple-touch-icon-144x144-precomposed.png">

</head>

<body class="post">

<!--[if lt IE 9]><div class="browser-upgrade alert alert-info">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</div><![endif]-->

<div class="navigation-wrapper">
	<div class="site-name">
		<a href="http://blog.local/">J.D. Flynn and the Adventures in Web Development</a>
	</div><!-- /.site-name -->
	<div class="top-navigation">
		<nav role="navigation" id="site-nav" class="nav">
		    <ul>
		        
				    
				        
				    
				    <li><a href="http://blog.local/" >Home</a></li>
				
				    
				        
				    
				    <li><a href="http://blog.local/posts/" >Blog Posts and Musings</a></li>
				
				    
				        
				    
				    <li><a href="http://blog.local/json-ld-schema-generator/" >JSON-LD Generator</a></li>
				
				    
				        
				    
				    <li><a href="http://blog.local/about/" >About J.D. Flynn</a></li>
				
		    </ul>
		</nav>
	</div><!-- /.top-navigation -->
</div><!-- /.navigation-wrapper -->



<div id="main" role="main">
  <div class="article-author-side">
    


<div>


	<img src="http://blog.local/images/profile.png" class="bio-photo" alt="J.D. Flynn bio photo">


  <h3>J.D. Flynn</h3>
  <p>Drupal developer by trade, geek by choice, getting stuff done in the Chicagoland area.</p>
  <a href="mailto:jd@jamesdflynn.com" class="author-social" target="_blank"><i class="fa fa-fw fa-envelope-square"></i>Email</a>
  <a href="http://twitter.com/JDDoesDev" class="author-social" target="_blank"><i class="fa fa-fw fa-twitter-square"></i> Twitter</a>
  
  
  <a href="http://linkedin.com/in/jflynn8" class="author-social" target="_blank"><i class="fa fa-fw fa-linkedin-square"></i> LinkedIn</a>
  
  
  <a href="http://github.com/JDDoesDev" class="author-social" target="_blank"><i class="fa fa-fw fa-github"></i> Github</a>
  
  
  
  
  
  
  
  
  
  
  <a href="http://paypal.me/JDDoesDev" class="author-social" target="_blank"><i class="fa fa-fw fa-paypal"></i> Donate via Paypal</a>
</div>

  </div>
  <article class="post">
    <div class="headline-wrap">
      
        <h1><a href="http://blog.local/development/secure-sites-https/" rel="bookmark" title="Securing Your Sites for HTTPS">Securing Your Sites for HTTPS</a></h1>
      
    </div><!--/ .headline-wrap -->
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <!-- Banner Responsive -->
    <ins class="adsbygoogle"
         style="display:block"
         data-ad-client="ca-pub-9258516687573779"
         data-ad-slot="5518211737"
         data-ad-format="auto"></ins>
    <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
    </script>
    <div class="article-wrap">
      <h2 id="why-do-you-need-to-be-secure">Why Do You Need to be Secure?</h2>

<p>The world is a dangerous place.  There is a lot of information out there, and some of it is more sensitive than the rest.  Your name, your emails, your passwords, social security, birth dates, credit card numbers, etc.  Many people just type their info into the forms with no thought as to what risk is being taken, but others, like myself, won’t even enter an email address without seeing the padlock in the URL bar.</p>

<div style="padding: 3px; background-color: #fefefe; border: 1px solid black; text-align: center; width: 100px; margin: auto;">
  <img src="/images/padlock.png" alt="Safety First!" />
</div>

<p>But where does that padlock come from and what does it mean?</p>

<h2 id="lock-it-down">Lock It Down!</h2>

<p>The padlock is a promise.  It’s a promise that data is secure while on your site.  It’s a promise that you have made the effort to protect your users’ information.  Most importantly, it’s a promise that you care about your users and you want them to feel safe while on your site.</p>

<p>Gary Illyes (<a href="http://twitter.com/methode">@methode</a>) made it as clear, as a direct Google representative, that Google was offering a rankings boost for sites with the HTTPS/SSL protocol in effect, citing <a href="http://www.simplypsychology.org/maslow.html">Maslow’s Hierarchy of Needs</a> as one of the driving factors.</p>
<div style="height: 200px; width: 400px; margin: auto; float: left;">
 <img src="/images/MaslowsHierarchyOfNeeds.png" alt="Maslow's Hierarchy of Needs" style="height: 200px; width: auto;" />
</div>

<p>Some concerns that have been voiced are speed and cost.  Website owners worry that passing their sites through the extra level of protocols will create a delay in getting the content from host to the user’s browser.  Gary Illyes had the strongest argument against that concern.  To paraphrase, he said that Google is in the business of being fast.  They are not going to recommend anything that is going to have a noticeable negative effect on the speed.</p>

<p>The other concern, that of cost, really depends on the level of security that a site needs.  I think that everyone can agree that there are different levels of information.  A name and email are not as high priority as, say a credit card or social security number.  With that being said, there are free, shared certificates available, or there are certificates that range in price to the tens of thousands of dollars.</p>

<p>My page, the one you’re reading, opted for a free certificate, compliments of <a href="www.cloudflare.com">CloudFlare</a>, however, depending on what information you’re collecting from your users, you might want to consider paying for a certificate with a warranty.  A warranty covers the end user, not the site owner, in the event of loss due to fraud or data breech.</p>

<h2 id="how-to-get-secure">How to Get Secure</h2>

<p>The process itself is relatively simple.  From a very, very high level view, all you do is get your certificate and point your site to https instead of http.  The process itself is a bit more involved than that.</p>

<p>I’m going to try and walk through the process I went through for this site, and for one of the sites I work on that uses a content management system behind a content provider as well.</p>

<p>For this small blog, the process was simple:</p>

<ul>
  <li>Set up a CloudFlare account.</li>
  <li>Change the nameservers over to the provided CloudFlare nameservers
– This part depends on your hosting provider and DNS provider</li>
  <li>Activate “Flexible SSL”</li>
  <li>Change the links to reflect the change</li>
  <li>Redirect your site to HTTPS (more on this in a bit)</li>
</ul>

<p>For the larger sites I work on, the process is not really that much more complicated, aside from the size of the site.</p>

<ul>
  <li>CloudFlare</li>
  <li>Nameservers</li>
  <li>Flexible SSL (or Full if you have your own certificate)</li>
  <li>Change the links</li>
  <li>Redirect</li>
</ul>

<p>Now how do you redirect?  Good question!</p>

<p>The simplest way to redirect is through an .htaccess file in your site’s root directory.  For those unfamiliar, the .htaccess file is the file that contains directives on a directory by directory basis.  Of course, if you have access to your httpd config file, that’s really the best way to go.</p>

<p>The standard method for redirecting over to HTTPS through a .htaccess file is</p>

<div class="highlight"><pre><code class="language-html" data-lang="html">RewriteEngine On
RewriteCond %{HTTPS} off
RewriteRule (.*) https://%{HTTP_HOST}%{REQUEST_URI}</code></pre></div>

<p>What do those lines mean?  Let’s break it down line by line.</p>

<p><code>RewriteEngine On</code> turns on the part of Apache that processes and redirects the URL</p>

<p><code>RewriteCond %{HTTPS} off</code> checks to see if the url contains HTTPS</p>

<p><code>RewriteRule (.*) https://%{HTTP_HOST}%{REQUEST_URI}</code> changes the URL over to the new, more secure version.</p>

<p>Pretty simple, right? For many sites, that’s all there is to it.</p>

<p>Something else to consider, though, is whether or not your site is behind an accelerator like Varnish and how that might affect your redirects and/or CMS.  The CMS I use at my job, Drupal, relies quite a bit on the <code>$_SERVER[]</code> superglobal to tell whether or not the site has been redirected to the HTTPS version.  Our Google Fonts module (@font-your-face) decides whether or not it’s going pull content from the http or https version.  In fact, the code itself reads:</p>

<div class="highlight"><pre><code class="language-php" data-lang="php"><span class="x">if (isset($_SERVER[&#39;HTTPS&#39;]) &amp;&amp; $_SERVER[&#39;HTTPS&#39;] == &#39;on&#39;) {</span>
<span class="x">  $base = &#39;https://fonts.googleapis.com/css?family=&#39;;</span>
<span class="x">}</span></code></pre></div>

<p>The problem lies in the fact that <code>$_SERVER['HTTPS']</code> is not set behind Varnish.  Instead, we have <code>$_SERVER['HTTP_X_FORWARDED_PROTO']</code> with a value of either <code>http</code> or <code>https</code> so, we can use that to our advantage in an IF/ELSE statement.  The one that I use is:</p>

<div class="highlight"><pre><code class="language-php" data-lang="php"><span class="x">if ( (isset($_SERVER[&quot;HTTPS&quot;]) &amp;&amp; strtolower($_SERVER[&quot;HTTPS&quot;]) == &quot;on&quot;)</span>
<span class="x">  || (isset($_SERVER[&quot;HTTP_X_FORWARDED_PROTO&quot;]) &amp;&amp; $_SERVER[&quot;HTTP_X_FORWARDED_PROTO&quot;] == &quot;https&quot;)</span>
<span class="x">  || (isset($_SERVER[&quot;HTTP_HTTPS&quot;]) &amp;&amp; $_SERVER[&quot;HTTP_HTTPS&quot;] == &quot;on&quot;)</span>
<span class="x">  )  {</span>
<span class="x">  $_SERVER[&quot;HTTPS&quot;] = &quot;on&quot;;</span>
<span class="x">}</span></code></pre></div>

<p>which covers pretty much every possibility and passes the right value through.</p>

<h2 id="in-summary">In Summary</h2>

<p>It’s really not all that difficult to get setup, nor is it expensive at all depending on your needs.  So, go forth, lock those padlocks, and make your users feel secure.  Be sure to clear your caches and check to make sure none of your images are hard-coded with <code>http</code> addresses.  A good tool to use to check why you might not be getting the green padlock is <a href="www.whynopadlock.com">Why No Padlock</a> which will check your site and tell you what might be going on.</p>

<p>Got any other suggestions on how else to secure your sites?  Let me know.</p>

<div style="clear:both"></div>

      <hr />
      <footer role="contentinfo">
        <div class="social-share">
  <h4>Share on</h4>
  <ul>
    <li>
      <a href="https://twitter.com/intent/tweet?text=http://blog.local/development/secure-sites-https/" class="twitter" title="Share on Twitter"><i class="fa fa-twitter"></i><span> Twitter</span></a>
    </li>
    <li>
      <a href="https://www.facebook.com/sharer/sharer.php?u=http://blog.local/development/secure-sites-https/" class="facebook" title="Share on Facebook"><i class="fa fa-facebook"></i><span> Facebook</span></a>
    </li>
    <li>
      <a href="https://plus.google.com/share?url=http://blog.local/development/secure-sites-https/" class="google-plus" title="Share on Google Plus"><i class="fa fa-google-plus"></i><span> Google+</span></a>
    </li>
  </ul>
</div><!-- /.social-share -->
        <p class="byline"><strong>Securing Your Sites for HTTPS</strong> was published on <time datetime="2015-03-29T15:17:14-05:00">March 29, 2015</time>.</p>
      </footer>
    </div><!-- /.article-wrap -->
  
    <section id="disqus_thread"></section><!-- /#disqus_thread -->
  
  </article>
</div><!-- /#main -->

<div class="footer-wrap">
  <div class="related-articles">
  <h4>You might also enjoy <small class="pull-right">(<a href="http://blog.local/posts/">View all posts</a>)</small></h4>
    <ul>
    
      <li><a href="http://blog.local/development/json-ld-markup-generator/" title="JSON-LD Markup Generator">JSON-LD Markup Generator</a></li>
    
      <li><a href="http://blog.local/development/beauty-json-ld/" title="The Unbelieveable Beauty of JSON-LD">The Unbelieveable Beauty of JSON-LD</a></li>
    
      <li><a href="http://blog.local/development/seo-information-overload/" title="How Do You Deal with SEO Information Overload?">How Do You Deal with SEO Information Overload?</a></li>
    
    </ul>
    <hr />
  </div><!-- /.related-articles -->
  <footer>
    
<div class="google-ads">
  <!-- 320 x 50 ad -->
  <!-- Jekyll Footer -->
  <ins class="adsbygoogle"
       style="display:inline-block;width:320px;height:50px"
       data-ad-client="ca-pub-9258516687573779"
       data-ad-slot="7134545736"></ins>
  <script>
  (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
</div><!-- /.google-ads -->


<span>&copy; 2017 J.D. Flynn.</span>

  </footer>
</div><!-- /.footer-wrap -->

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="http://blog.local/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="http://blog.local/assets/js/scripts.min.js"></script>

  
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'jamesdflynn'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = '//' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>




</body>
</html>
